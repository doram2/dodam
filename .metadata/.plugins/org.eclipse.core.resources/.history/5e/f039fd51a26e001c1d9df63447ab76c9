package model.DAO;

public class LoginDAO extends DataBaseInfo{
	public int loginCk(String id , String pw) {
		int i = 0;
		AuthInfo authInfo = null;
		con = getConnection();
		String sql =" select emp_id, emp_pw, 'emp' grade from employees "
				+ "   where emp_id = ? "
				+ "   union "
				+ "   select mem_id, mem_pw, 'mem'  from member"
				+ "   where mem_id = ? ";
		try {
			pstmt = con.prepareStatement(sql);
			pstmt.setString(1, id);
			pstmt.setString(2, id);
			rs = pstmt.executeQuery();
			if (rs.next()) { // 아이디가 존재하면 AuthInfo 객체 생성
					authInfo = new AuthInfo();
					authInfo.setGrade(rs.getString("grade"));
					authInfo.setUserId(rs.getString("emp_id"));
					authInfo.setUserPw(rs.getString("emp_pw"));
			}
		}catch(Exception e) {e.printStackTrace();}
		finally {close();}
		
		return authInfo;
		
	}
}
